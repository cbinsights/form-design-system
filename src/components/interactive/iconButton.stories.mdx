import { Meta, Story, Preview, Props } from "@storybook/addon-docs/blocks";
import { withKnobs, text, boolean, optionsKnob as options } from '@storybook/addon-knobs';
import StarFilledIcon from 'lib/icons/react/StarFilledIcon';
import CollectionPublicIcon from 'lib/icons/react/CollectionPublicIcon';
import StoryAddIcon from 'lib/icons/react/StoryAddIcon';
import WorkFasterIcon from 'lib/icons/react/WorkFasterIcon';
import SalesforceIcon from 'lib/icons/react/SalesforceIcon';
import { arrayToOptions, StoryWrapper, StoryItem, ImportPath, State } from "components/util/storybook";
import { MockLink } from 'components/util/mock-react-router';

import IconButton, { THEMES, RADII, SIZES } from './IconButton';

export const Icons = [StarFilledIcon, CollectionPublicIcon, StoryAddIcon, WorkFasterIcon, SalesforceIcon]

<Meta title="Components/Interactive/IconButton" decorators={[withKnobs]} component={IconButton} />

# IconButton

<ImportPath component={IconButton} section="interactive" />

<Story name="Knobs" parameters={{ docs: { disable: true }}}>
  <div className={boolean("Inverted", false) ? 'inverted' : ''}>
    <IconButton
      isDestructive={boolean('isDestructive', false)}
      isActive={boolean('isActive', false)}
      disabled={boolean('disabled', false)}
      isLoading={boolean('isLoading', false)}
      theme={options('theme', arrayToOptions(THEMES), undefined, {
        display: 'inline-radio',
      })}
      size={options('size', arrayToOptions(SIZES), undefined, {
        display: 'inline-radio',
      })}
      radius={options('radius', arrayToOptions(RADII), undefined, {
        display: 'inline-radio',
      })}
      label={text('label', undefined)}
      Icon={StarFilledIcon}
    />
  </div>
</Story>

<Preview isExpanded>
  <IconButton
    Icon={StarFilledIcon}
  />
</Preview>

<Props of={IconButton} />

### Themes

<Preview>
  <Story name="Themes">
    <StoryWrapper>
      {THEMES.map(theme => (
        <StoryItem>
          <IconButton
            theme={theme}
            Icon={Icons[0]}
          />
        </StoryItem>
      ))}
    </StoryWrapper>
  </Story>
</Preview>

### Destructive

<Preview>
  <Story name="Destructive">
    <StoryWrapper>
      <StoryItem>
        <IconButton
          isDestructive
          Icon={Icons[0]}
      />
      </StoryItem>
    </StoryWrapper>
  </Story>
</Preview>


### Inverted

<Preview>
  <Story name="Inverted">
    <div className="inverted bgColor--blue padding--all rounded--all">
    <StoryWrapper>
      <StoryItem>
        <IconButton
          theme="ghost"
          Icon={Icons[0]}
      />
      </StoryItem>
      <StoryItem>
        <IconButton
          theme="outlined"
          Icon={Icons[0]}
      />
      </StoryItem>
    </StoryWrapper>
    </div>
  </Story>
</Preview>

### isActive

`isActive` should be used on buttons to signify the button having
some affect (applying a filter, causing a popover to be open).
**Click to toggle on and off**.

<Preview>
  <Story name="isActive">
    <>
      <StoryWrapper>
        <State
          initialValue={{}}
          render={(value, setValue) => ( 
            <>
              {THEMES.map((theme, idx) => (
                <StoryItem>
                  <IconButton
                    Icon={Icons[0]}
                    theme={theme}
                    isActive={!value[idx]}
                    onClick={() => setValue({ ...value, [idx]: !Boolean(value[idx])})}
                  />
                </StoryItem>
              ))}
            </>
          )}
        />
        <State
          initialValue={{}}
          render={(value, setValue) => ( 
            <>
              <StoryItem>
                <IconButton
                  isDestructive
                  Icon={Icons[0]}
                  isActive={!value[0]}
                  onClick={() => setValue({ ...value, [0]: !Boolean(value[0])})}
                />
              </StoryItem>
            </>
          )}
        />
      </StoryWrapper>
      <div class="inverted bgColor--blue padding--all rounded--all margin--top">
        <StoryWrapper>
          <State
            initialValue={{}}
            render={(value, setValue) => ( 
              <>
                {['ghost', 'outlined'].map((theme, idx) => (
                  <StoryItem>
                    <IconButton
                      Icon={Icons[0]}
                      theme={theme}
                      isActive={!value[idx]}
                      onClick={() => setValue({ ...value, [idx]: !Boolean(value[idx])})}
                    />
                  </StoryItem>
                ))}
              </>
            )}
          />
        </StoryWrapper>
      </div>
    </>
  </Story>
</Preview>


### Sizes

<Preview>
  <Story name="Sizes">
    <StoryWrapper>
    {SIZES.map(size => (
      <StoryItem>
        <IconButton
          size={size}
          Icon={Icons[0]}
        />
      </StoryItem>
    ))}
    </StoryWrapper>
  </Story>
</Preview>

### Radii

<Preview>
  <Story name="Radii">
    <StoryWrapper>
    {RADII.map(radius => (
      <StoryItem>
        <IconButton
          theme={THEMES[1]}
          radius={radius}
          Icon={Icons[0]}
        />
      </StoryItem>
    ))}
    </StoryWrapper>
  </Story>
</Preview>


### Loading

<Preview>
  <Story name="Loading">
    <StoryWrapper>
      <StoryItem>
        <IconButton
          isLoading
          Icon={Icons[0]}
        />
      </StoryItem>
      <StoryItem>
        <IconButton
          isDestructive
          isLoading
          Icon={Icons[0]}
        />
      </StoryItem>
    </StoryWrapper>
  </Story>
</Preview>